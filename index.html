<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1">
	<title>Platzi Video - ApiMode</title>
	<link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
	<link rel="stylesheet" href="css/main.css" type="text/css">
</head>
<body>
	<div class="bigContainer" id="bigContainer">
		
		<!-- CABECERA -->
		<header class="headPlatzi">
			<div class="dH1">
				<h1>
					<span class="whitePlatzi">Platzi</span>
					<span class="pinkPlatzi">Vídeo</span>
				</h1>
			</div>
			<div class="dSpan">
				<span class="swOpen" id="swOpen">Buscar</span>
			</div>
		</header>

		<!-- BUSQUEDA / IMAGEN DE USUARIO -->
		<section class="frmSearch" id="frmSearch">
			<form action="" class="frmSearchForm" id="frmSearchForm">
				<input type="search" class="txtSearch" placeholder="Busca por artista, tema o amigo">
			</form>
			<div class="divUser" id="divUser">
				<img src="img/usr_sorei.jpg" alt="Sorei Pañidlen" class="imgUser">
				<h4>Sorei Pañidlen</h4>
			</div>	
		</section>

		<!-- VIDEOS -->
		<section class="secVideos" id="secVideos">
			<div class="divDestacados divGVideo" id="divGVideo">
				<div class="headDestacados headGVideo">
					<span class="txtIntro">Lo mejor de la semana</span>
					<h4>Destacados</h4>
				</div>
				<div class="imgDestacados imgGVideo">
					<figure class="figVideo">
						<img src="img/travel-min.jpg" alt="" class="imgVideo">
						<figcaption>
							B52's - ROAM
						</figcaption>
					</figure>
					<figure class="figVideo">
						<img src="img/balloon.jpg" alt="" class="imgVideo">
						<figcaption>
							Europe - New Ball Countdown
						</figcaption>
					</figure>
					<figure class="figVideo">
						<img src="img/business-min.jpg" alt="" class="imgVideo">
						<figcaption>
							Jo-Hung Toe - I'm The Bussness
						</figcaption>
					</figure>
					<figure class="figVideo">
						<img src="img/cats.jpg" alt="" class="imgVideo">
						<figcaption>
							Lorde - Cat's Look Like...
						</figcaption>
					</figure>
				</div>
			</div>
			<div class="divProgramar divGVideo" id="divGVideo">
				<div class="headProgramar headGVideo">
					<span class="txtIntro">Si deseas concentrarte...</span>
					<h4>Para programar</h4>
				</div>
				<div class="imgProgramar imgGVideo">
					<figure class="figVideo">
						<img src="img/clock.jpg" alt="" class="imgVideo">
						<figcaption>
							Ian Mckellan - Time Goes By
						</figcaption>
					</figure>
					<figure class="figVideo">
						<img src="img/crashplane.jpg" alt="" class="imgVideo">
						<figcaption>
							Zamphir - The Last Flight
						</figcaption>
					</figure>
					<figure class="figVideo">
						<img src="img/fantasy.jpg" alt="" class="imgVideo">
						<figcaption>
							Black Box - Fantasy
						</figcaption>
					</figure>
					<figure class="figVideo">
						<img src="img/flowers-min.jpg" alt="" class="imgVideo">
						<figcaption>
							Lea Brigard - Peace of Mind
						</figcaption>
					</figure>
				</div>
			</div>
			<div class="divTope divGVideo" id="divGVideo">
				<div class="headTope headGVideo">
					<span class="txtIntro">Hasta el Tope</span>
					<h4>Llena tu cabeza de rock</h4>
				</div>
				<div class="imgDestacados imgGVideo">
					<figure class="figVideo">
						<img src="img/flowers.jpg" alt="" class="imgVideo">
						<figcaption>
							Black'n Dark - Old Picture
						</figcaption>
					</figure>
					<figure class="figVideo">
						<img src="img/going_green.jpg" alt="" class="imgVideo">
						<figcaption>
							Hell Awaits - Hell In Green
						</figcaption>
					</figure>
					<figure class="figVideo">
						<img src="img/horizon.jpg" alt="" class="imgVideo">
						<figcaption>
							Rough 20 - Beyond
						</figcaption>
					</figure>
					<figure class="figVideo">
						<img src="img/maldives.jpg" alt="" class="imgVideo">
						<figcaption>
							MortDecai - Inventive
						</figcaption>
					</figure>
				</div>
			</div>
		</section>

		<!-- LISTAS -->
		<aside class="leftBar">
			<div class="myPlayList">
				<h2 class="h2List">Mi selección</h2>
				<ol class="lstPlay">
					<li>Queen - Don't stop me now</li>
					<li>Slayer - Raining Blood</li>
					<li>Metallica - Master of Puppets</li>
					<li>Royal Blood - Figure It Out</li>
					<li>AC/DC - Back in Black</li>
					<li>The Black Crowes - Hard to Handle</li>
					<li>The Darkness - I Believe in a Thing Called Love</li>
					<li>Slayer - South of Heaven</li>
					<li>Metallica - Seek And Destroy</li>
					<li>Helloween - Twilight of the Gods</li>
					<li>Helloween - You Always Walk Alone</li>				
				</ol>
			</div>
			<div class="frPlayList">
				<h2 class="h2List">Selecciones de amigos</h2>
				<ul class="lstFriends" id="lstFriendsId">
					
					
				</ul>
			</div>
		</aside>


	</div>

	<script type="text/javascript">
		var $openButton = document.getElementById('swOpen');
		var $divGVideo = document.getElementById('divGVideo');
		var $frmSearchForm = document.getElementById('frmSearchForm');
		var $divUser = document.getElementById('divUser');
		const lstFriends = document.getElementById('lstFriendsId');
		const urlUsers = 'https://randomuser.me/api/?results=7&nat=us,dk,fr,gb';
		
		$openButton.addEventListener('click', function(){
			$frmSearchForm.classList.toggle('active');
			$divUser.classList.toggle('active');
			$divGVideo.classList.toggle('active');
		});

		

		(async function load() {

			let inner = '';
			let arrFriends = '';

			async function getData(url) {
				const response = await fetch(url);
				const data = response.json();
				//console.log('Data: ', data);
				return data;
			}

			function arrNombre(obj) {
				/*
				Esta función hace que el primer caracter del nombre y del apellido del amigo
				quede en mayúscula.
				*/

				let strFirst = obj.first.charAt(0).toUpperCase().concat(obj.first.substr(1));
				let strLast = obj.last.charAt(0).toUpperCase().concat(obj.last.substr(1));
				return strName = strFirst + " " + strLast;
			}
			
			/*function creaPlantilla(user) {
				return (`<li>
							<a href="" class="aImgFr">
								<img src="${user.picture.thumbnail}" class="imgFriends" alt="${arrNombre(user.name)}">
								<span class="h3Friends">${arrNombre(user.name)}</span>
							</a>
						</li>`);
			}*/

			function creaPlantilla(user) {
				return (`<li class="aImgFr">
							
								<img src="${user.picture.thumbnail}" class="imgFriends" alt="${arrNombre(user.name)}">
								<span class="h3Friends">${arrNombre(user.name)}</span>
							
						</li>`);
			}

			function agrListener(classN) {
				debugger
				liFriends = document.getElementsByClassName(classN);
				liFriends.forEach((element) => element.addEventListener('click', () => alert('hiciste clic')));
			}
		
			arrFriends = await getData(urlUsers);
			arrFriends.results.forEach((element) => inner = inner + creaPlantilla(element));
			lstFriends.innerHTML=inner;
			agrListener('aImgFr');
				
			

		})()


	</script>


</body>
</html>
